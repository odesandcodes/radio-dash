---
// RADIO-BOSS: THE FINAL PIVOT
---
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Radio-Boss</title>
    <style>
        body { font-family: sans-serif; background: #f8fafc; color: #0f172a; margin: 0; padding: 20px; display: flex; flex-direction: column; align-items: center; }
        .container { width: 100%; max-width: 400px; }
        h1 { font-size: 0.7rem; font-weight: 900; text-align: center; color: #64748b; margin: 20px 0 40px 0; letter-spacing: 0.3em; }
        .card { 
            background: white; border: 1px solid #e2e8f0; border-radius: 20px; 
            padding: 20px; margin-bottom: 12px; cursor: pointer; 
            display: flex; align-items: center; gap: 15px; transition: 0.2s;
        }
        .card.playing { border-color: #2563eb; border-width: 2px; transform: scale(1.02); }
        .btn-ui { width: 45px; height: 45px; border-radius: 50%; background: #f1f5f9; display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
        .playing .btn-ui { background: #2563eb; color: white; }
        .info { flex-grow: 1; min-width: 0; }
        .label { font-size: 0.6rem; font-weight: 800; color: #2563eb; text-transform: uppercase; margin-bottom: 4px; }
        .title { font-size: 1rem; font-weight: 800; margin-bottom: 2px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .comp { font-size: 0.8rem; color: #64748b; }
        .play-icon { display: block; } .pause-icon { display: none; }
        .playing .play-icon { display: none; } .playing .pause-icon { display: block; }
    </style>
</head>
<body>
    <div class="container">
        <h1>RADIO-BOSS</h1>
        <div id="ui">
            {['wqxr', 'jonathan', 'mission', 'lush'].map((id) => (
                <div class="card" id={`card-${id}`} onclick={`toggleStation('${id}')`}>
                    <div class="btn-ui">
                        <svg class="play-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"/></svg>
                        <svg class="pause-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>
                    </div>
                    <div class="info">
                        <div class="label">{id.toUpperCase()}</div>
                        <div id={`${id}-t`} class="title">Loading...</div>
                        <div id={`${id}-c`} class="comp">Connecting...</div>
                    </div>
                </div>
            ))}
        </div>
    </div>
    <audio id="global-player"></audio>
    <script is:inline>
        const player = document.getElementById('global-player');
        const streams = {
            wqxr: 'https://stream.wqxr.org/wqxr.mp3',
            jonathan: 'https://stream.thejonathanchannel.org/jonathan.mp3',
            mission: 'https://ice1.somafm.com/missioncontrol-128-mp3',
            lush: 'https://ice1.somafm.com/lush-128-mp3'
        };
        let currentId = null;
        function toggleStation(id) {
            const card = document.getElementById('card-' + id);
            if (currentId === id && !player.paused) {
                player.pause();
                card.classList.remove('playing');
            } else {
                document.querySelectorAll('.card').forEach(c => c.classList.remove('playing'));
                currentId = id;
                player.src = streams[id];
                player.play();
                card.classList.add('playing');
            }
        }
        async function sync() {
            try {
                const r = await fetch('/api/stations.json');
                const d = await r.json();
                ['wqxr','jonathan','mission','lush'].forEach(s => {
                    if(d[s]) {
                        document.getElementById(s+'-t').innerText = d[s].title;
                        document.getElementById(s+'-c').innerText = d[s].comp;
                    }
                });
            } catch (e) {}
        }
        sync(); setInterval(sync, 20000);
    </script>
</body>
</html>